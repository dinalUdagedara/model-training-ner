%% Class Diagram - CrackInt Backend
%% Chapter 6, Section 6.4
%% Based on app/models.py

classDiagram
    class UUIDModel {
        +UUID id
    }

    class TimestampModel {
        +datetime created_at
        +datetime updated_at
    }

    class User {
        +UUID id
        +str name
        +str email
        +datetime created_at
        +datetime updated_at
    }

    class Resume {
        +UUID id
        +UUID user_id
        +dict entities
        +str raw_text
        +datetime created_at
        +datetime updated_at
    }

    class JobPosting {
        +UUID id
        +UUID user_id
        +dict entities
        +str raw_text
        +str location
        +datetime deadline
        +datetime created_at
        +datetime updated_at
    }

    class PrepSession {
        +UUID id
        +UUID user_id
        +UUID resume_id
        +UUID job_posting_id
        +str mode
        +str status
        +float readiness_score
        +dict summary
        +datetime created_at
        +datetime updated_at
    }

    class Message {
        +UUID id
        +UUID session_id
        +str sender
        +str type
        +str content
        +dict meta
        +datetime created_at
        +datetime updated_at
    }

    UUIDModel <|-- User
    UUIDModel <|-- Resume
    UUIDModel <|-- JobPosting
    UUIDModel <|-- PrepSession
    UUIDModel <|-- Message
    TimestampModel <|-- User
    TimestampModel <|-- Resume
    TimestampModel <|-- JobPosting
    TimestampModel <|-- PrepSession
    TimestampModel <|-- Message
    User "1" --> "*" Resume : owns
    User "1" --> "*" JobPosting : owns
    User "1" --> "*" PrepSession : owns
    Resume "1" --> "*" PrepSession : linked to
    JobPosting "1" --> "*" PrepSession : linked to
    PrepSession "1" --> "*" Message : contains
